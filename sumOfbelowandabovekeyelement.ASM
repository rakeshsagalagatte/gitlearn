;BINARY SEARCH IN AN ARRAY TO FIND THE KEY ELEMENT

ORG 00H
    SJMP 30H
ORG 30H
    KEY EQU 35H		;WE SHOULD ENTER THE VALUE IN RUNNING TIME
	ARRAY EQU 41H	;ARRAY ELEMENTS STARTED AT THIS MEMORY LOCATION 
	SIZE EQU 31H	;SIZE OF AN ARRAY
	MOV 60H,SIZE
	STATUS EQU 37H	;IF IT IS 1 KEY IS PRESENT 
	LO EQU 38H
	HIG EQU 39H     ;
	LOWERSUM EQU 52H
	HIGHERSUM EQU 51H

	MOV R5,SIZE	   ;COPYING THE VALUE OF SIZE TO REG.5
	MOV A,SIZE	  ;ASSING THE SIZE TO HIGH
	MOV HIG,A
;------------------ENTER THE ARRAY ELEMENTS IN SPECIFIED MEMORY LOCATION IN ACENDING ORDER -----------;
NOW :ADD A,LO
	MOV B,#02
	DIV AB
	MOV R6,A ;TO HOLD THE RESULT
	ADD A,#40H
	MOV R0,A
	MOV A,@R0
	CJNE A,KEY,TODO	   ; IF A==1 , A<KEY
	MOV STATUS,#01
	MOV A,R0
	ADD A,#40H
	MOV 55H,A
	DEC A
	SUBB A,#40H
	JZ HIGHSUM
	MOV R0,A
SUM :MOV A,@R0
	ADD A,LOWERSUM
	MOV LOWERSUM,A
    DEC R0
	CJNE R0,#40H,SUM
	;__________END OF LOWERSUM_________
HIGHSUM :	MOV R0,55H
	        INC R0
			MOV A,60H
			ADD A,#40H
			MOV 60H,A
			SUBB A,R0
			JNC LOOP
			MOV R0,55H
			INC R0
	GOHIGH :MOV A,@R0
			ADD A,HIGHERSUM
			MOV HIGHERSUM,A 
			MOV A,R0
			INC R0
			CJNE A,60H,GOHIGH
	        SJMP LOOP

TODO:  JC TOHIGH      ;IF A == 1 THEN JUMP  
	   DEC R6
	   MOV HIG,R6
	   MOV A,HIG
	   DJNZ SIZE,NOW
	   MOV STATUS,#00H
	   SJMP LOOP
TOHIGH:INC R6
       MOV LO,R6
	   MOV A,HIG
       DJNZ SIZE,NOW
	   MOV STATUS,#00H
	   SJMP LOOP
 LOOP : SJMP LOOP	
END  	 
	 
